<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø­Ù„</title>
   <link rel="stylesheet" href="tt.css">
</head>
<body>

<h2>ğŸ“‹ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø­Ù„</h2>

<form onsubmit="event.preventDefault(); sendToWhatsApp();">
  <label>ğŸŒŸ Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„:</label>
  <input type="text" id="store-name" required>

  <label>ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
  <input type="text" id="contact-number" required>

  <label>ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨:</label>
  <select id="mode" onchange="toggleSections()" required>
    <option value="">-- Ø§Ø®ØªØ± --</option>
    <option value="register">ØªØ³Ø¬ÙŠÙ„</option>
    <option value="promote">ØªØ±ÙˆÙŠØ¬ ÙÙ‚Ø·</option>
  </select>

  <label>ğŸ“ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©:</label>
  <select id="province" onchange="onProvinceChange()" required>
    <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© --</option>
    <option value="Ø¨ØºØ¯Ø§Ø¯">Ø¨ØºØ¯Ø§Ø¯</option>
    <option value="Ø§Ù„Ø¨ØµØ±Ø©">Ø§Ù„Ø¨ØµØ±Ø©</option>
    <option value="Ù†ÙŠÙ†ÙˆÙ‰">Ù†ÙŠÙ†ÙˆÙ‰</option>
    <option value="Ø§Ù„Ù†Ø¬Ù">Ø§Ù„Ù†Ø¬Ù</option>
    <option value="Ø°ÙŠ Ù‚Ø§Ø±">Ø°ÙŠ Ù‚Ø§Ø±</option>
    <option value="Ø§Ø±Ø¨ÙŠÙ„">Ø£Ø±Ø¨ÙŠÙ„</option>
    <option value="Ø§Ù„Ø§Ù†Ø¨Ø§Ø±">Ø§Ù„Ø£Ù†Ø¨Ø§Ø±</option>
    <option value="ÙƒØ±ÙƒÙˆÙƒ">ÙƒØ±ÙƒÙˆÙƒ</option>
    <option value="Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©">Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©</option>
    <option value="Ø¯Ù‡ÙˆÙƒ">Ø¯Ù‡ÙˆÙƒ</option>
    <option value="Ø¨Ø§Ø¨Ù„">Ø¨Ø§Ø¨Ù„</option>
    <option value="ÙƒØ±Ø¨Ù„Ø§Ø¡">ÙƒØ±Ø¨Ù„Ø§Ø¡</option>
    <option value="ÙˆØ§Ø³Ø·">ÙˆØ§Ø³Ø·</option>
    <option value="ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†">ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†</option>
    <option value="Ù…ÙŠØ³Ø§Ù†">Ù…ÙŠØ³Ø§Ù†</option>
    <option value="Ø§Ù„Ù…Ø«Ù†Ù‰">Ø§Ù„Ù…Ø«Ù†Ù‰</option>
    <option value="Ø§Ù„Ù‚Ø§Ø¯Ø³ÙŠØ©">Ø§Ù„Ù‚Ø§Ø¯Ø³ÙŠØ©</option>
  </select>

  <div id="baghdad-options" style="display:none;">
    <label>â¬…ï¸ Ø§Ù„Ø¬Ù‡Ø©:</label>
    <select id="baghdad-side" onchange="loadBaghdadAreas()">
      <option value="">-- Ø§Ø®ØªØ± --</option>
      <option value="Ø±ØµØ§ÙØ©">Ø±ØµØ§ÙØ©</option>
      <option value="ÙƒØ±Ø®">ÙƒØ±Ø®</option>
    </select>

    <label>ğŸ“Œ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</label>
    <select id="baghdad-area" onchange="checkBaghdadArea()">
      <option value="">-- Ø§Ø®ØªØ± --</option>
    </select>
  </div>

  <label>ğŸ“Œ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ:</label>
  <textarea id="address" required></textarea>

  <div id="register-section" style="display:none;">
    <label>ğŸ’¼ Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø©:</label>
    <select id="package">
      <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© --</option>
      <option value="100">Ø¨Ø§Ù‚Ø© 100$ (ÙƒÙˆÙ„ Ø³Ù†ØªØ± + Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† + ØªÙˆØµÙŠÙ„)</option>
      <option value="150" style="display:none;">Ø¨Ø§Ù‚Ø© 150$ (ÙƒÙ„ Ù…Ø§ Ø³Ø¨Ù‚ + ØªØµÙˆÙŠØ± ÙˆØªØµÙ…ÙŠÙ…)</option>
    </select>

    <label>ğŸ“¢ Ù‡Ù„ ØªØ­ØªØ§Ø¬ ØªØ±ÙˆÙŠØ¬ØŸ</label>
    <select id="promotion-needed" onchange="togglePromoPrice()">
      <option value="">-- Ø§Ø®ØªØ± --</option>
      <option value="Ù†Ø¹Ù…">Ù†Ø¹Ù…</option>
      <option value="Ù„Ø§">Ù„Ø§</option>
    </select>

    <div id="promo-price-section" style="display:none;">
      <label>ğŸ’° Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„ØªØ±ÙˆÙŠØ¬ ($):</label>
      <input type="number" id="product-price">
    </div>
  </div>

  <div id="promote-section" style="display:none;">
    <label>ğŸ’° Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„ØªØ±ÙˆÙŠØ¬ ($):</label>
    <input type="number" id="only-promo-price">
  </div>

  <button type="submit">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
  <button type="button" onclick="sendLocation()">ğŸ“ Ø¥Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÙŠ</button>
  <button class="button111" onclick="window.location.href='index.html'">Ø±Ø¬ÙˆØ¹ Ø§Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ©</button>
</form>

<script>
  function toggleSections() {
    const mode = document.getElementById("mode").value;
    document.getElementById("register-section").style.display = mode === "register" ? "block" : "none";
    document.getElementById("promote-section").style.display = mode === "promote" ? "block" : "none";
  }

  function togglePromoPrice() {
    const show = document.getElementById("promotion-needed").value === "Ù†Ø¹Ù…";
    document.getElementById("promo-price-section").style.display = show ? "block" : "none";
  }

  function onProvinceChange() {
    const province = document.getElementById("province").value;
    document.getElementById("baghdad-options").style.display = province === "Ø¨ØºØ¯Ø§Ø¯" ? "block" : "none";
    checkBaghdadArea();
  }

  function loadBaghdadAreas() {
    const side = document.getElementById("baghdad-side").value;
    const areaSelect = document.getElementById("baghdad-area");
    areaSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± --</option>';

    const areas = side === "Ø±ØµØ§ÙØ©" ? ["Ø±ØµØ§ÙØ© Ø£ÙˆÙ„Ù‰", "Ø±ØµØ§ÙØ© Ø«Ø§Ù†ÙŠØ©", "Ø±ØµØ§ÙØ© Ø«Ø§Ù„Ø«Ø©"] :
                 side === "ÙƒØ±Ø®" ? ["ÙƒØ±Ø® Ø£ÙˆÙ„Ù‰", "ÙƒØ±Ø® Ø«Ø§Ù†ÙŠØ©", "ÙƒØ±Ø® Ø«Ø§Ù„Ø«Ø©"] : [];

    areas.forEach(area => {
      const opt = document.createElement("option");
      opt.value = area;
      opt.textContent = area;
      areaSelect.appendChild(opt);
    });

    checkBaghdadArea();
  }

  function checkBaghdadArea() {
    const province = document.getElementById("province").value;
    const side = document.getElementById("baghdad-side").value;
    const area = document.getElementById("baghdad-area").value;
    const pkg150 = document.querySelector('#package option[value="150"]');

    if (province === "Ø¨ØºØ¯Ø§Ø¯" && side === "Ø±ØµØ§ÙØ©" && area === "Ø±ØµØ§ÙØ© Ø«Ø§Ù„Ø«Ø©") {
      pkg150.style.display = "block";
    } else {
      pkg150.style.display = "none";
    }
  }

  async function getUserIP() {
    try {
      const res = await fetch("https://api.ipify.org?format=json");
      const data = await res.json();
      return data.ip;
    } catch {
      return "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    }
  }

  async function sendToWhatsApp() {
    const name = document.getElementById("store-name").value.trim();
    const phone = document.getElementById("contact-number").value.trim();
    const mode = document.getElementById("mode").value;
    const province = document.getElementById("province").value;
    const side = document.getElementById("baghdad-side").value;
    const area = document.getElementById("baghdad-area").value;
    const address = document.getElementById("address").value.trim();

    if (!name || !phone || !province || !address) {
      alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„");
      return;
    }

    let message = `ğŸ”¥ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:\n\nğŸ“Œ Ø§Ù„Ø§Ø³Ù…: ${name}\nğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone}\nğŸ˜ï¸ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©: ${province}`;
    if (province === "Ø¨ØºØ¯Ø§Ø¯") {
      message += `\nâ¬…ï¸ Ø§Ù„Ø¬Ù‡Ø©: ${side}\nğŸ“ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${area}`;
    }
    message += `\nğŸ“Œ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}`;

    let total = 0;

    if (mode === "register") {
      const pkg = document.getElementById("package").value;
      const promo = document.getElementById("promotion-needed").value;
      message += `\n\nğŸ’¼ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${pkg}$`;
      total += parseFloat(pkg);

      if (promo === "Ù†Ø¹Ù…") {
        const price = parseFloat(document.getElementById("product-price").value || 0);
        const cost = Math.ceil((price / 5) * 2);
        message += `\nğŸ“¢ ØªØ±ÙˆÙŠØ¬ØŸ Ù†Ø¹Ù…\nğŸ’° Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬: ${price}$\nğŸ“¢ ÙƒÙ„ÙØ© Ø§Ù„ØªØ±ÙˆÙŠØ¬: ${cost}$`;
        total += cost;
      } else {
        message += `\nğŸ“¢ ØªØ±ÙˆÙŠØ¬ØŸ Ù„Ø§`;
      }

    } else if (mode === "promote") {
      const price = parseFloat(document.getElementById("only-promo-price").value || 0);
      const cost = Math.ceil((price / 5) * 2);
      total += cost;
      message += `\n\nğŸ“¢ ØªØ±ÙˆÙŠØ¬ ÙÙ‚Ø·\nğŸ’° Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬: ${price}$\nğŸ“¢ ÙƒÙ„ÙØ© Ø§Ù„ØªØ±ÙˆÙŠØ¬: ${cost}$`;
    }

    const ip = await getUserIP();
    message += `\n\nğŸŒ IP: ${ip}\nğŸ’µ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total}$`;

    const finalUrl = `https://wa.me/9647727220385?text=${encodeURIComponent(message)}`;
    window.open(finalUrl, "_blank");
  }

  function sendLocation() {
    const url = `https://wa.me/9647727220385?text=ğŸ“ Ù‡Ø°Ø§ Ù…ÙˆÙ‚Ø¹ÙŠ: ${encodeURIComponent(window.location.href)}`;
    window.open(url, "_blank");
  }
</script>

</body>
</html>
