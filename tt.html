<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALOGIX -| تسجيل المحلات التجارية</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="tt.css">

    <style>
        :root {
            --primary-color: #8774e1;
            --secondary-color: #1e1f23;
            --accent-color: #6a5acd;
            --text-color: #e1e1e3;
            --success-color: #2ecc71;
            --card-bg: #2d2e33;
            --input-bg: #3a3b40;
            --border-color: #44454a;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .logo-container {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .company-name {
            font-size: 1rem;
            color: #a1a1a3;
            letter-spacing: 2px;
            margin-top: -5px;
        }
        
        .form-container {
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(0, 0, 0, 0.3);
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .form-header h2 {
            color: var(--primary-color);
            font-weight: 700;
        }
        
        .form-header p {
            color: #a1a1a3;
        }
        
        .form-control {
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-color);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(135, 116, 225, 0.25);
            background-color: var(--input-bg);
            color: var(--text-color);
        }
        
        label {
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
            color: #d1d1d3;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            border-radius: 10px;
            padding: 12px 25px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-success {
            background-color: var(--success-color);
            border-color: var(--success-color);
            border-radius: 10px;
            padding: 12px 25px;
            font-weight: 600;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }
        
        .hidden {
            display: none !important;
        }
        
        .input-group-text {
            background-color: var(--border-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        small.text-muted {
            color: #8a8a8c !important;
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--secondary-color);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            .form-container {
                padding: 20px;
            }
            
            .logo {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <div class="logo-container animate-fade">
            <div class="logo">شركة</div>
            <div class="company-name">ALOGIX</div>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="form-container animate-fade" style="animation-delay: 0.2s;">
                    <div class="form-header">
                        <h2>سجل محلّك الآن</h2>
                        <p>املأ النموذج أدناه لتسجيل أو ترويج محلّك</p>
                    </div>
                    
                    <form id="storeForm">
                        <!-- اسم المحل -->
                        <div class="form-group">
                            <label for="storeName">اسم المحل *</label>
                            <input type="text" class="form-control" id="storeName" required placeholder="أدخل اسم المحل">
                        </div>
                        
                        <!-- رقم الهاتف -->
                        <div class="form-group">
                            <label for="phoneNumber">رقم الهاتف *</label>
                            <input type="tel" class="form-control" id="phoneNumber" required placeholder="077XXXXXXXX" pattern="077[0-9]{8}">
                            <small class="text-muted"> يجب ان يكون الرقم متكون من 11 رقم</small>
                        </div>
                        
                        <!-- المحافظة -->
                        <div class="form-group">
                            <label for="governorate">المحافظة *</label>
                            <select class="form-control" id="governorate" required>
                                <option value="" selected disabled>اختر المحافظة</option>
                                <option value="بغداد">بغداد</option>
                                <option value="البصرة">البصرة</option>
                                <option value="نينوى">نينوى</option>
                                <option value="أربيل">أربيل</option>
                                <option value="السليمانية">السليمانية</option>
                                <option value="ذي قار">ذي قار</option>
                                <option value="كركوك">كركوك</option>
                                <option value="الأنبار">الأنبار</option>
                                <option value="بابل">بابل</option>
                                <option value="كربلاء">كربلاء</option>
                                <option value="النجف">النجف</option>
                                <option value="ميسان">ميسان</option>
                                <option value="واسط">واسط</option>
                                <option value="ديالى">ديالى</option>
                                <option value="صلاح الدين">صلاح الدين</option>
                                <option value="القادسية">القادسية</option>
                                <option value="دهوك">دهوك</option>
                                <option value="المثنى">المثنى</option>
                            </select>
                        </div>
                        
                        <!-- المنطقة (تظهر فقط إذا كانت بغداد) -->
                        <div class="form-group hidden" id="baghdadDistrictGroup">
                            <label for="baghdadDistrict">المنطقة في بغداد *</label>
                            <select class="form-control" id="baghdadDistrict">
                                <option value="" selected disabled>اختر المنطقة</option>
                                <option value="الرصافة">الرصافة</option>
                                <option value="الكرخ">الكرخ</option>
                            </select>
                        </div>
                        
                        <!-- الرصافة (تظهر فقط إذا كانت الرصافة) -->
                        <div class="form-group hidden" id="rusafaGroup">
                            <label for="rusafaArea">منطقة الرصافة *</label>
                            <select class="form-control" id="rusafaArea">
                                <option value="" selected disabled>اختر المنطقة</option>
                                <option value="الرصافة الأولى">الرصافة الأولى</option>
                                <option value="الرصافة الثانية">الرصافة الثانية</option>
                                <option value="الرصافة الثالثة">الرصافة الثالثة</option>
                            </select>
                        </div>
                        
                        <!-- الكرخ (تظهر فقط إذا كانت الكرخ) -->
                        <div class="form-group hidden" id="karkhGroup">
                            <label for="karkhArea">منطقة الكرخ *</label>
                            <select class="form-control" id="karkhArea">
                                <option value="" selected disabled>اختر المنطقة</option>
                                <option value="الكرخ الأولى">الكرخ الأولى</option>
                                <option value="الكرخ الثانية">الكرخ الثانية</option>
                                <option value="الكرخ الثالثة">الكرخ الثالثة</option>
                            </select>
                        </div>
                        
                        <!-- الوصف الدقيق -->
                        <div class="form-group">
                            <label for="storeDescription">الوصف الدقيق للموقع *</label>
                            <textarea class="form-control" id="storeDescription" rows="3" required placeholder="أدخل وصفاً دقيقاً لموقع المحل"></textarea>
                        </div>
                        
                        <!-- نوع العملية -->
                        <div class="form-group">
                            <label for="operationType">نوع العملية *</label>
                            <select class="form-control" id="operationType" required>
                                <option value="" selected disabled>اختر نوع العملية</option>
                                <option value="register">تسجيل</option>
                                <option value="promote">ترويج</option>
                            </select>
                        </div>
                        
                        <!-- الباقة (تظهر فقط عند اختيار تسجيل) -->
                        <div class="form-group hidden" id="packageGroup">
                            <label for="package">اختر الباقة *</label>
                            <select class="form-control" id="package">
                                <option value="" selected disabled>اختر الباقة</option>
                                <option value="150">باقة 150,000 دينار  تصوير + تصميم الصور + كول سنتر + مندوبين + خدمة توصيل الئ جميع محافظات العراق فقط في الرصافة الثالثة متوفرة </option>
                                <option value="100">باقة 100,000 دينار كول سنتر + مندوبين + خدمة توصيل الى جميع محافظات العراق </option>
                            </select>
                        </div>
                        
                        <!-- سعر الترويج (تظهر فقط عند اختيار ترويج) -->
                        <div class="form-group hidden" id="promotionGroup">
                            <label for="promotionAmount">مبلغ الترويج (بالدولار) *</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="promotionAmount" placeholder="أدخل المبلغ">
                                <span class="input-group-text">$</span>
                            </div>
                            <small class="text-muted">لكل 5 دولار يضاف 2 دولار ربح</small>
                            <div id="profitCalculation" class="mt-2 p-2 bg-light rounded hidden" style="background-color: var(--input-bg) !important;">
                                الربح المتوقع: <span id="profitAmount" style="color: var(--success-color); font-weight: bold;">0</span> دولار
                            </div>
                        </div>
                        
                        <!-- زر التسجيل والدفع -->
                        <button type="button" id="submitBtn" class="btn btn-success">
                            <i class="fas fa-paper-plane me-2"></i> تسجيل ودفع الآن</button>
                                <button class="button1" onclick="window.location.href='index.html'">رجوع الى صفحة الاساسية
    </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // عناصر DOM
            const storeNameInput = document.getElementById('storeName');
            const phoneNumberInput = document.getElementById('phoneNumber');
            const governorateSelect = document.getElementById('governorate');
            const baghdadDistrictGroup = document.getElementById('baghdadDistrictGroup');
            const baghdadDistrictSelect = document.getElementById('baghdadDistrict');
            const rusafaGroup = document.getElementById('rusafaGroup');
            const rusafaAreaSelect = document.getElementById('rusafaArea');
            const karkhGroup = document.getElementById('karkhGroup');
            const karkhAreaSelect = document.getElementById('karkhArea');
            const storeDescriptionInput = document.getElementById('storeDescription');
            const operationTypeSelect = document.getElementById('operationType');
            const packageGroup = document.getElementById('packageGroup');
            const packageSelect = document.getElementById('package');
            const promotionGroup = document.getElementById('promotionGroup');
            const promotionAmountInput = document.getElementById('promotionAmount');
            const profitCalculation = document.getElementById('profitCalculation');
            const profitAmountSpan = document.getElementById('profitAmount');
            const submitBtn = document.getElementById('submitBtn');
            const clearBtn = document.getElementById('clearBtn');
            
            // تحميل البيانات المحفوظة إذا وجدت
            loadSavedData();
            
            // منع إدخال أي شيء غير الأرقام في حقل الهاتف
            phoneNumberInput.addEventListener('input', function() {
                this.value = this.value.replace(/[^0-9]/g, '');
            });
            
            // تغيير المحافظة
            governorateSelect.addEventListener('change', function() {
                const selectedGovernorate = this.value;
                
                // إخفاء جميع المجموعات أولاً
                baghdadDistrictGroup.classList.add('hidden');
                rusafaGroup.classList.add('hidden');
                karkhGroup.classList.add('hidden');
                
                // إظهار المجموعات المناسبة لبغداد
                if (selectedGovernorate === 'بغداد') {
                    baghdadDistrictGroup.classList.remove('hidden');
                }
                
                // حفظ التغييرات
                saveData();
            });
            
            // تغيير منطقة بغداد
            baghdadDistrictSelect.addEventListener('change', function() {
                const selectedDistrict = this.value;
                
                // إخفاء جميع المجموعات أولاً
                rusafaGroup.classList.add('hidden');
                karkhGroup.classList.add('hidden');
                
                // إظهار المجموعات المناسبة
                if (selectedDistrict === 'الرصافة') {
                    rusafaGroup.classList.remove('hidden');
                } else if (selectedDistrict === 'الكرخ') {
                    karkhGroup.classList.remove('hidden');
                }
                
                // حفظ التغييرات
                saveData();
            });
            
            // تغيير نوع العملية
            operationTypeSelect.addEventListener('change', function() {
                const selectedOperation = this.value;
                
                // إخفاء جميع المجموعات أولاً
                packageGroup.classList.add('hidden');
                promotionGroup.classList.add('hidden');
                profitCalculation.classList.add('hidden');
                
                // إظهار المجموعات المناسبة
                if (selectedOperation === 'register') {
                    packageGroup.classList.remove('hidden');
                } else if (selectedOperation === 'promote') {
                    promotionGroup.classList.remove('hidden');
                }
                
                // حفظ التغييرات
                saveData();
            });
            
            // حساب الربح عند تغيير مبلغ الترويج
            promotionAmountInput.addEventListener('input', function() {
                const amount = parseFloat(this.value) || 0;
                const profit = Math.floor(amount / 5) * 2;
                
                if (amount > 0) {
                    profitAmountSpan.textContent = profit;
                    profitCalculation.classList.remove('hidden');
                } else {
                    profitCalculation.classList.add('hidden');
                }
                
                // حفظ التغييرات
                saveData();
            });
            
            // إرسال النموذج
            submitBtn.addEventListener('click', function() {
                // التحقق من صحة النموذج
                if (!validateForm()) {
                    return;
                }
                
                // حفظ البيانات قبل الإرسال
                saveData();
                
                // إنشاء رسالة الواتساب
                const whatsappMessage = generateWhatsAppMessage();
                
                // إرسال الرسالة عبر الواتساب
                sendWhatsAppMessage(whatsappMessage);
            });
            
            // مسح البيانات
            clearBtn.addEventListener('click', function() {
                if (confirm('هل أنت متأكد من رغبتك في مسح جميع البيانات؟')) {
                    localStorage.removeItem('storeData');
                    document.getElementById('storeForm').reset();
                    
                    // إخفاء جميع العناصر الاختيارية
                    baghdadDistrictGroup.classList.add('hidden');
                    rusafaGroup.classList.add('hidden');
                    karkhGroup.classList.add('hidden');
                    packageGroup.classList.add('hidden');
                    promotionGroup.classList.add('hidden');
                    profitCalculation.classList.add('hidden');
                }
            });
            
            // حفظ أي تغيير في حقول النموذج
            document.querySelectorAll('#storeForm input, #storeForm select, #storeForm textarea').forEach(element => {
                element.addEventListener('change', saveData);
                element.addEventListener('input', saveData);
            });
            
            // التحقق من صحة النموذج
            function validateForm() {
                let isValid = true;
                
                // التحقق من اسم المحل
                if (!storeNameInput.value.trim()) {
                    alert('الرجاء إدخال اسم المحل');
                    isValid = false;
                }
                
                // التحقق من رقم الهاتف
                const phoneNumber = phoneNumberInput.value;
                const validPrefixes = ['077', '078', '075'];
                const startsWithValidPrefix = validPrefixes.some(prefix => phoneNumber.startsWith(prefix));
                
                if (!startsWithValidPrefix || phoneNumber.length !== 11 || !/^\d+$/.test(phoneNumber)) {
                    alert('الرجاء إدخال رقم هاتف صحيح يبدأ بـ 077 أو 078 أو 075 ويتكون من 11 رقماً');
                    isValid = false;
                }
                
                // التحقق من المحافظة
                if (!governorateSelect.value) {
                    alert('الرجاء اختيار المحافظة');
                    isValid = false;
                }
                
                // التحقق من مناطق بغداد إذا كانت المحافظة بغداد
                if (governorateSelect.value === 'بغداد') {
                    if (!baghdadDistrictSelect.value) {
                        alert('الرجاء اختيار المنطقة في بغداد');
                        isValid = false;
                    }
                    
                    if (baghdadDistrictSelect.value === 'الرصافة' && !rusafaAreaSelect.value) {
                        alert('الرجاء اختيار منطقة الرصافة');
                        isValid = false;
                    }
                    
                    if (baghdadDistrictSelect.value === 'الكرخ' && !karkhAreaSelect.value) {
                        alert('الرجاء اختيار منطقة الكرخ');
                        isValid = false;
                    }
                }
                
                // التحقق من الوصف
                if (!storeDescriptionInput.value.trim()) {
                    alert('الرجاء إدخال وصف دقيق للموقع');
                    isValid = false;
                }
                
                // التحقق من نوع العملية
                if (!operationTypeSelect.value) {
                    alert('الرجاء اختيار نوع العملية');
                    isValid = false;
                }
                
                // التحقق من الباقة إذا كانت العملية تسجيل
                if (operationTypeSelect.value === 'register' && !packageSelect.value) {
                    alert('الرجاء اختيار الباقة');
                    isValid = false;
                }
                
                // التحقق من مبلغ الترويج إذا كانت العملية ترويج
                if (operationTypeSelect.value === 'promote') {
                    const amount = parseFloat(promotionAmountInput.value);
                    if (!amount || amount <= 0 || amount % 5 !== 0) {
                        alert('الرجاء إدخال مبلغ ترويج صحيح (من مضاعفات الـ 5 دولار)');
                        isValid = false;
                    }
                }
                
                return isValid;
            }
            
            // إنشاء رسالة الواتساب
            function generateWhatsAppMessage() {
                let message = "📋 *طلب جديد - ALOGIX *\n\n";
                message += "🔹 *معلومات الطلب:*\n";
                
                // نوع العملية
                if (operationTypeSelect.value === 'register') {
                    message += "📌 *نوع الخدمة:* تسجيل محل جديد\n";
                    message += `💰 *الباقة المختارة:* ${packageSelect.value === '150' ? '150,000 دينار (للرصافة الثالثة)' : '100,000 دينار (لجميع المحافظات)'}\n\n`;
                } else {
                    message += "📌 *نوع الخدمة:* ترويج المحل\n";
                    const amount = parseFloat(promotionAmountInput.value);
                    const profit = Math.floor(amount / 5) * 2;
                    message += `💰 *مبلغ الترويج:* ${amount} دولار\n`;
                    message += `🔼 *الربح المتوقع:* ${profit} دولار\n\n`;
                }
                
                // تفاصيل المحل
                message += "🔹 *تفاصيل المحل:*\n";
                message += `🏷️ *اسم المحل:* ${storeNameInput.value}\n`;
                message += `📞 *رقم الهاتف:* ${phoneNumberInput.value}\n`;
                message += `📍 *الموقع:* ${governorateSelect.value}`;
                
                // تفاصيل بغداد إذا كانت المحافظة بغداد
                if (governorateSelect.value === 'بغداد') {
                    message += ` - ${baghdadDistrictSelect.value}`;
                    
                    if (baghdadDistrictSelect.value === 'الرصافة') {
                        message += ` - ${rusafaAreaSelect.value}`;
                    } else {
                        message += ` - ${karkhAreaSelect.value}`;
                    }
                }
                
                message += `\n📝 *الوصف الدقيق:*\n${storeDescriptionInput.value}\n\n`;
                message += "📅 *تاريخ الطلب:* " + new Date().toLocaleString('ar-IQ') + "\n";
                message += "شكراً لاختياركم ALOGIX";
                
                return encodeURIComponent(message);
            }
            
            // إرسال رسالة الواتساب
            function sendWhatsAppMessage(message) {
                const phoneNumber = "7727220385"; // رقم الهاتف المقدم
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;
                
                // فتح الرابط في نافذة جديدة
                window.open(whatsappUrl, '_blank');
            }
            
            // حفظ البيانات في localStorage
            function saveData() {
                const storeData = {
                    storeName: storeNameInput.value,
                    phoneNumber: phoneNumberInput.value,
                    governorate: governorateSelect.value,
                    baghdadDistrict: baghdadDistrictSelect.value,
                    rusafaArea: rusafaAreaSelect.value,
                    karkhArea: karkhAreaSelect.value,
                    storeDescription: storeDescriptionInput.value,
                    operationType: operationTypeSelect.value,
                    package: packageSelect.value,
                    promotionAmount: promotionAmountInput.value
                };
                
                localStorage.setItem('storeData', JSON.stringify(storeData));
            }
            
            // تحميل البيانات المحفوظة من localStorage
            function loadSavedData() {
                const savedData = localStorage.getItem('storeData');
                if (savedData) {
                    const storeData = JSON.parse(savedData);
                    
                    // تعبئة الحقول بالبيانات المحفوظة
                    storeNameInput.value = storeData.storeName || '';
                    phoneNumberInput.value = storeData.phoneNumber || '';
                    
                    if (storeData.governorate) {
                        governorateSelect.value = storeData.governorate;
                        
                        // تشغيل حدث تغيير المحافظة لتحميل المناطق التابعة
                        governorateSelect.dispatchEvent(new Event('change'));
                        
                        if (storeData.governorate === 'بغداد' && storeData.baghdadDistrict) {
                            baghdadDistrictSelect.value = storeData.baghdadDistrict;
                            
                            // تشغيل حدث تغيير منطقة بغداد
                            baghdadDistrictSelect.dispatchEvent(new Event('change'));
                            
                            if (storeData.baghdadDistrict === 'الرصافة' && storeData.rusafaArea) {
                                rusafaAreaSelect.value = storeData.rusafaArea;
                            } else if (storeData.baghdadDistrict === 'الكرخ' && storeData.karkhArea) {
                                karkhAreaSelect.value = storeData.karkhArea;
                            }
                        }
                    }
                    
                    storeDescriptionInput.value = storeData.storeDescription || '';
                    
                    if (storeData.operationType) {
                        operationTypeSelect.value = storeData.operationType;
                        
                        // تشغيل حدث تغيير نوع العملية
                        operationTypeSelect.dispatchEvent(new Event('change'));
                        
                        if (storeData.operationType === 'register' && storeData.package) {
                            packageSelect.value = storeData.package;
                        } else if (storeData.operationType === 'promote' && storeData.promotionAmount) {
                            promotionAmountInput.value = storeData.promotionAmount;
                            
                            // تشغيل حدث تغيير مبلغ الترويج لحساب الربح
                            promotionAmountInput.dispatchEvent(new Event('input'));
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
